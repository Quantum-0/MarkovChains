# MarkovChains/Библиотека

Генератор текста (генератор бреда) на основе марковских цепей.

Данная библиотека позволяет генерировать случайные фразы и предложения.

Библиотека содержит 2 генератора - на основе пар слов (биграмм) и троек слов (триграмм).

## Марковские цепи

Генератор текста использует марковские цепи.

Алгоритм работы следующий:
* В генератор загружается существующий текст с помощью метода LearnText
* Генератор разбивает текст на предложения
* Каждое предложение генератор разбивает на массив слов и массив разделителей
* Слова последовательно объединяются в пары (или тройки) слов (например предложение "abc def ghk" разбивается на пары {START "abc"}, {"abc" "def"}, {"def" "ghk"}, {"ghk" END})
* Генератор выбирает случайную пару (тройку) слов, начинающуются на START
* В цикле генератор находит следующую пару (тройку) слов, начало которой соответствует концу текущей
* Достигнув конца предложения генератор останавливает свою работу и возвращает полученное предложение

## Интерфейсы

### IMarkovGenerator
IMarkovGenerator представляет из себя простой базовый интерфейс, позволяющий работать с генератором текста.

Интерфейс содержит в себе следующие методы:
* GenerateText() - Генерация текста
* GenerateText(string startWord) - Генерация текста с фиксированным первым словом
* LearnText(string text) - Обучение, на основе текста
* LearnText(System.IO.Stream stream) - Обучение, на основе текста из потока
* LearnText(System.IO.Stream stream, System.Text.Encoding encoding) - Обучение, на основе текста из потока с заданной кодировкой текста

### IFileSerializable
Интерфейс предоставляет возможность сериализации и десериализации.

Методы:
* SaveToFile(string filename) - Сохранение в файл
* LoadFromFile(string filename) - Загрузка из файла

### IExtendedMarkovGenerator
IExtendedMarkovGenerator - это расширеный интерфейс для генератора, наследуемый от IMarkovGenerator и IFileSerializable и дополняющий генератор следующими возможностями:
* GetNGramCount(int n) - возвращает количество N-грамм с заданным N
* GetNGramCount() - возвращает количество всех N-грамм (т.е. размер базы данных)
* GetStartNGramCount() - возвращает количество начал предложения, т.е. N-грамм, первым элементом которых является START
* GetEndNGramCount() - возвращает количество начал предложения, т.е. N-грамм, последним элементом которых является END
* GetStartWords() - возвращает список слов, с которых могут начинаться предложения
* GetEndWords() - возвращает список слов, на которые могут оканчиваться предложения
* Union(IExtendedMarkovGenerator other) - объединяет базу данных N-грамм с базой данных объекта other
* Clear() - очищает базу данных N-грамм

## Пример

Использование генераторов текста из данной библиотеки тривиально:

Первым делом необходимо создать генератор текста:

> IMarkovGenerator gen = new TrigramMarkovGenerator();

Затем генератор текста нужно обучить:

> gen.LearnText("abc bcd cde def? abc cba test, test, fff, and, maybe, test." +
>
> "Bananas are very testy, isn't it? Yes, they are tasty!" +
>
> "Bananas are yellow. Yellow is beautiful color!");

После обучения генератор можно использовать для получений случайных фраз:

> gen.GenerateText();

Или:

> gen.GenerateText("Bananas");
>
> gen.GenerateText("Abc");

## Цель

Целью данного проекта было изучение принципа работы простого алгоритма генерации текста и дальнейшее использование полученной библиотеки в других своих проектах (например чат-бот)

## Зависимости

Данный проект использует библиотеку [Protobuf](https://github.com/mgravell/protobuf-net) для быстрой сериализации и десериализации данных в файл

## Лицензия

[MIT License](./LICENSE)
